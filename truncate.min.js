"use strict";!function(e){function t(e,t){this.jQueryObject=t,this.elements=[],this.data=jQuery.extend(!0,s,e),this.stringHelper=new i,this.init()}function i(){}var s={breakWords:!1,overflowHidden:!0,refreshOnWindowResize:!0,suffix:"...",maximumWordLenght:255,refreshResizeDelay:50};e.fn.truncate=function(i){return new t(i,e(this))},t.prototype={init:function(){this._destroy=!1,this.initElements(),this.hideOverflowContent(),this.bindEvents()},bindEvents:function(){var t=this;if(this.data.refreshOnWindowResize){var i;e(window).on("resize",function(s){this._destroy&&(e(this).unbind(s),s.prevendDefault()),clearTimeout(i),i=setTimeout(function(){t.refreshElements(),t.hideOverflowContent(!0)},t.data.refreshResizeDelay)})}},initElements:function(){var e=this;this.jQueryObject.each(function(t,i){e.elements.push(e.getInfoElement(i))})},hideOverflowContent:function(e){for(var t=0;t<this.elements.length;t++){var i=this.elements[t].overflowWidth||this.elements[t].overflowHeight;if(i||e){this.addCss(t);var s=this.elements[t].originalContent,n=s.split(" ");this.elements[t].jQueryObject.html("");for(var r="",h=0;h<n.length;h++){var l=this.getTruncatedWordForElement(n[h],t);if(0==h)r=l;else{var o=r+" "+l;if(o=this.stringHelper.trim(o,["."," "])+this.data.suffix,this.checkIfHeightWordIsTooLongForElement(o,t))break;r+=" "+l}}r=this.stringHelper.trim(r,[" ","."]),r.split(" ").length!=this.elements[t].originalContent.split(" ").length&&(r+=this.data.suffix),this.setTextToElement(t,r)}}},addCss:function(e){if(!this.elements[e].cssAlreadyAdded){if(this.elements[e].cssAlreadyAdded=!0,this.elements[e].originalCss={},this.data.breakWords){var t=this.elements[e].jQueryObject.css("word-break"),i=this.elements[e].jQueryObject.css("hyphens");this.elements[e].originalCss["word-break"]=t?t:"",this.elements[e].originalCss.hyphens=i?i:"",this.elements[e].jQueryObject.css({"word-break":"break-all",hyphens:"auto"})}if(this.data.overflowHidden){var s=this.elements[e].jQueryObject.css("overflow");this.elements[e].originalCss.overflow=s?s:"",this.elements[e].jQueryObject.css("overflow","hidden")}}},setTextToElement:function(e,t){return this.elements[e].jQueryObject.html(t),this.refreshElement(e),this},refreshElement:function(e){return this.elements[e].scrollWidth=this.elements[e].element.scrollWidth,this.elements[e].innerWidth=this.elements[e].jQueryObject.innerWidth(),this.elements[e].scrollHeight=this.elements[e].element.scrollHeight,this.elements[e].innerHeight=this.elements[e].jQueryObject.innerHeight(),this.elements[e].overflowWidth=this.elements[e].scrollWidth>this.elements[e].jQueryObject.innerWidth(),this.elements[e].overflowHeight=this.elements[e].scrollHeight>this.elements[e].jQueryObject.innerHeight(),this},getInfoElement:function(t){var i=e(t),s={jQueryObject:i,element:t,scrollWidth:t.scrollWidth,innerWidth:i.innerWidth(),scrollHeight:t.scrollHeight,innerHeight:i.innerHeight(),originalContent:this.stringHelper.trim(i.html(),["\r\n","\n","\r"," "])};return s.overflowWidth=s.scrollWidth>s.jQueryObject.innerWidth(),s.overflowHeight=s.scrollHeight>s.jQueryObject.innerHeight(),s},refreshElements:function(){for(var e=0;e<this.elements.length;e++)this.refreshElement(e)},getTruncatedWordForElement:function(e,t){for(var i=!1,s=this.data.maximumWordLenght;this.checkIfWidthWordIsTooLongForElement(e+this.data.suffix,t)&&s>0;)i=!0,e=e.substr(0,e.length-1),s--;return i?e+this.data.suffix:e},checkIfWidthWordIsTooLongForElement:function(e,t){return this.checkIfSizeWordIsTooLongForElement("width",e,t)},checkIfHeightWordIsTooLongForElement:function(e,t){return this.checkIfSizeWordIsTooLongForElement("height",e,t)},checkIfSizeWordIsTooLongForElement:function(e,t,i){var s=this.elements[i].jQueryObject.html();this.setTextToElement(i,t);var n="overflow"+this.stringHelper.capitalize(e);return this.elements[i][n]?(this.elements[i].jQueryObject.html(s),!0):(this.elements[i].jQueryObject.html(s),!1)},destroy:function(){return this.resetElements(),this.elements=[],this.jQueryObject=[],this.data=[],this.stringHelper=null,this._destroy=!0,!0},resetCssForElement:function(t){var i=this;e.each(this.elements[t].originalCss,function(e,s){i.elements[t].jQueryObject.css(e,s)})},resetElements:function(){for(var e=0;e<this.elements.length;e++)this.resetCssForElement(e),this.setTextToElement(e,this.elements[e].originalContent)}},i.prototype={capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},trim:function(e,t){return this.leftTrim(this.rightTrim(e,t),t)},leftTrim:function(e,t){return t=t||"\\s",e.replace(new RegExp("^["+t+"]+","g"),"")},rightTrim:function(e,t){return t=t||"\\s",e.replace(new RegExp("["+t+"]+$","g"),"")}}}(jQuery);
