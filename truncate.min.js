"use strict";!function(e){function t(e,t){this.jQueryObject=t,this.elements=[],this.data=jQuery.extend(!0,i,e),this.init()}var i={breakWords:!1,overflowHidden:!0,refreshOnWindowResize:!0,suffix:"...",maximumWordLenght:255,refreshResizeDelay:50};e.fn.truncate=function(i){new t(i,e(this))},t.prototype={init:function(){this.initElements(),this.hideOverflowContent(),this.bindEvents()},bindEvents:function(){var t=this;if(this.data.refreshOnWindowResize){var i;e(window).on("resize",function(){clearTimeout(i),i=setTimeout(function(){t.refreshElements(),t.hideOverflowContent(!0)},t.data.refreshResizeDelay)})}},initElements:function(){var e=this;this.jQueryObject.each(function(t,i){e.elements.push(e.getInfoElement(i))})},hideOverflowContent:function(e){for(var t=0;t<this.elements.length;t++){var i=this.elements[t].overflowWidth||this.elements[t].overflowHeight;if(i||e){this.addCss(this.elements[t].jQueryObject);var n=this.elements[t].originalContent,r=n.split(" ");this.elements[t].jQueryObject.html("");for(var s="",o=0;o<r.length;o++){var h=this.getTruncatedWordForElement(r[o],t);if(0==o)s=h;else{var l=s+" "+h;if(l=l.trim(["."," "])+this.data.suffix,this.checkIfHeightWordIsTooLongForElement(l,t))break;s+=" "+h}}s=s.trim([" ","."]),s!=this.elements[t].originalContent&&(s+=this.data.suffix),this.setTextToElement(t,s)}}},addCss:function(e){this.data.breakWords&&e.css({"word-break":"break-all",hyphens:"auto"}),this.data.overflowHidden&&e.css("overflow","hidden")},setTextToElement:function(e,t){return this.elements[e].jQueryObject.html(t),this.refreshElement(e),this},refreshElement:function(e){return this.elements[e].scrollWidth=this.elements[e].element.scrollWidth,this.elements[e].innerWidth=this.elements[e].jQueryObject.innerWidth(),this.elements[e].scrollHeight=this.elements[e].element.scrollHeight,this.elements[e].innerHeight=this.elements[e].jQueryObject.innerHeight(),this.elements[e].overflowWidth=this.elements[e].scrollWidth>this.elements[e].jQueryObject.innerWidth(),this.elements[e].overflowHeight=this.elements[e].scrollHeight>this.elements[e].jQueryObject.innerHeight(),this},getInfoElement:function(t){var i=e(t),n={jQueryObject:i,element:t,scrollWidth:t.scrollWidth,innerWidth:i.innerWidth(),scrollHeight:t.scrollHeight,innerHeight:i.innerHeight(),originalContent:i.html().trim("\r\n","\n","\r"," ")};return n.overflowWidth=n.scrollWidth>n.jQueryObject.innerWidth(),n.overflowHeight=n.scrollHeight>n.jQueryObject.innerHeight(),n},refreshElements:function(){for(var e=0;e<this.elements.length;e++)this.refreshElement(e)},getTruncatedWordForElement:function(e,t){for(var i=!1,n=this.data.maximumWordLenght;this.checkIfWidthWordIsTooLongForElement(e+this.data.suffix,t)&&n>0;)i=!0,e=e.substr(0,e.length-1),n--;return i?e+this.data.suffix:e},checkIfWidthWordIsTooLongForElement:function(e,t){return this.checkIfSizeWordIsTooLongForElement("width",e,t)},checkIfHeightWordIsTooLongForElement:function(e,t){return this.checkIfSizeWordIsTooLongForElement("height",e,t)},checkIfSizeWordIsTooLongForElement:function(e,t,i){var n=this.elements[i].jQueryObject.html();this.setTextToElement(i,t);var r="overflow"+e.capitalize();return this.elements[i][r]?(this.elements[i].jQueryObject.html(n),!0):(this.elements[i].jQueryObject.html(n),!1)}}}(jQuery),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.trimLeft=function(e){return void 0===e&&(e="s"),this.replace(new RegExp("^["+e+"]+"),"")},String.prototype.trimRight=function(e){return void 0===e&&(e="s"),this.replace(new RegExp("["+e+"]+$"),"")},String.prototype.trim=function(e){return this.trimLeft(e).trimRight(e)};
